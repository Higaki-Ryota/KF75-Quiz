import{q as v,_ as A,a as E,b as V}from"./DlzaIm6_.js";import{g,s as j}from"./BDA1vHQe.js";import{d as J,r as u,o as K,x as M,B as Q,J as D,K as R,L as r,g as $,y as q}from"./B2226xQw.js";const P=J({__name:"enjoy",setup(F){const t=u("menu"),_=v.map(e=>Array.from({length:e.length},(s,f)=>f)),n=u(_.map(e=>g(e,e.length))),a=u(0),z=[["6級","小中学生初級","制限時間：60秒"],["5級","小中学生上級","制限時間：60秒"],["4級","高校生初級","制限時間：60秒"],["3級","高校生上級","制限時間：60秒"],["2級","大学生初級","制限時間：60秒"],["1級","大学生上級","制限時間：60秒"]],h=u([]),k=u([]),S=e=>{a.value=e,t.value="question",n.value=_.map(s=>g(s,s.length)),o.value=60,p.value=Date.now(),db.collection("kf75").where("level","==",a.value).get().then(s=>{s&&s.forEach(f=>{h.value.push(f.data())})}).catch(s=>{})},l=u(0),i=u(0),c=u(0),x=u(null),o=u(6),b=()=>{j(()=>{t.value==="question"&&o.value>0&&o.value--,o.value<=c.value*5&&(t.value="result",o.value=60)},1e3)};K(()=>{b()});const m=u(!1),d=u(!1),y=u(!1),p=u(0),w=u(0),I=e=>{m.value===!1&&o.value>0&&(w.value=Date.now(),m.value=!0,e?(i.value++,x.value="正解！",d.value=!0):(c.value++,x.value="不正解",y.value=!0,o.value<=c.value*5&&(t.value="result",o.value=60)),w.value<p.value+2e3?setTimeout(()=>{l.value++,p.value=Date.now(),m.value=!1,d.value=!1,y.value=!1},3e3+p.value-w.value):setTimeout(()=>{l.value++,p.value=Date.now(),m.value=!1,d.value=!1,y.value=!1},1e3))},N=()=>{t.value="menu",l.value=0,i.value=0,c.value=0,n.value=_.map(e=>g(e,e.length)),h.value=[],k.value=[]},T=()=>{t.value="menu",l.value=0,i.value=0,c.value=0,n.value=_.map(e=>g(e,e.length))};return(e,s)=>{const f=$("a-background"),C=V,B=A,L=E;return q(),M("div",null,[Q(f),t.value==="menu"?(q(),D(C,{key:0,onSelect:S,Levels:z})):t.value==="question"?(q(),D(B,{key:1,count:o.value-c.value*5,correctIndex:r(v)[a.value][n.value[a.value][l.value]].answer,quizIndex:l.value,quizNumber:n.value[a.value][l.value],correctNumber:i.value,answerDisplay:m.value,correctDisplay:d.value,incorrectDisplay:y.value,question:r(v)[a.value][n.value[a.value][l.value]].question,options:r(v)[a.value][n.value[a.value][l.value]].options,fontSize:r(v)[a.value][n.value[a.value][l.value]].fontSize,answer:r(v)[a.value][n.value[a.value][l.value]].options[r(v)[a.value][n.value[a.value][l.value]].answer],onSelect:I,onTimeout:e.timeout,onQuit:T},null,8,["count","correctIndex","quizIndex","quizNumber","correctNumber","answerDisplay","correctDisplay","incorrectDisplay","question","options","fontSize","answer","onTimeout"])):t.value==="result"?(q(),D(L,{key:2,"correct-count":i.value,ranking:k.value,onSelect:N},null,8,["correct-count","ranking"])):R("",!0)])}}});export{P as default};
